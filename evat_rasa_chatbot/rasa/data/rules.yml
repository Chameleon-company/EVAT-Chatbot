version: "3.1"

rules:

# Greeting rule
- rule: Greet user
  steps:
  - intent: greet
  - action: utter_greet

# Menu selection rule
- rule: Handle menu selection
  steps:
  - intent: menu_selection
  - action: action_handle_menu_selection

# Goodbye rule
- rule: Say goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

# Route planning rule - call action handler directly
- rule: Handle route planning
  steps:
  - intent: route_planning
  - action: action_handle_menu_selection

# Route info rule - handle when user provides route details
- rule: Handle route info
  steps:
  - intent: route_info
  - action: action_handle_route_info

# Emergency charging rule - call action handler directly
- rule: Handle emergency charging
  steps:
  - intent: emergency_charging
  - action: action_handle_menu_selection

# Emergency location input rule - call action handler directly
- rule: Handle emergency location input
  steps:
  - intent: emergency_location_input
  - action: action_handle_emergency_location_input

# Preference charging rule - call action handler directly
- rule: Handle preference charging
  steps:
  - intent: preference_charging
  - action: action_handle_menu_selection

# Preference selection rule - user picks cheapest/fastest/closest/premium
- rule: Handle preference selection
  steps:
  - intent: preference_selection
  - action: action_handle_preference_charging

# Preference location input rule - user provides location for preference flow
- rule: Handle preference location input
  steps:
  - intent: preference_location_input
  - action: action_handle_preference_charging

# Route station selection rule - only valid in route planning context
- rule: Handle route station selection
  steps:
  - intent: route_station_selection
  - action: action_handle_route_station_selection

# Emergency station selection rule - only valid in emergency context
- rule: Handle emergency station selection
  steps:
  - intent: emergency_station_selection
  - action: action_handle_emergency_station_selection

# Preference station selection rule - only valid in preference context
- rule: Handle preference station selection
  steps:
  - intent: preference_station_selection
  - action: action_handle_preference_station_selection

# Action selection rule
- rule: Handle action choice
  steps:
  - intent: action_selection
  - action: action_handle_action_choice

# Follow-up requests rule
- rule: Handle follow-up requests
  steps:
  - intent: follow_up
  - action: action_handle_follow_up